# PDF-QA App

This project is a **PDF Question Answering** application where users can upload a PDF, get a summary, and interact with the document using AI-generated answers based on its content.

## Prerequisites

- **Docker**: Ensure Docker is installed on your machine to run the application.
- **Hugging Face API Key**: You will need a Hugging Face API key to use their models for summarization and question answering. You can get it from [Hugging Face](https://huggingface.co).
- **SQLite Database**: The application uses SQLite, and you need to specify the database URL.

## Getting Started

### 1. Clone the Repository

First, clone the repository to your local machine:

1. **clone and move inside the directory**


    ```bash
     git clone https://github.com/ANMOL0804/pdf_qa_application.git
   

### 2. Set Environment Variables

To run the app locally, you need to rename .env.example to .env and set two environment variables inside:

- **`HF_API_KEY`**: Your Hugging Face API key for accessing the summarization and question-answering models.
- **`DATABASE_URL`**: The URL for the SQLite database used by the application(sqlite:///./session_data.db for local storage).

#### Steps:

1. **set .env.example to .env**
   

   ```bash
     mv backend/.env.example backend/.env

2. **set the environment variables**


### 3. Build and Run with Docker:

To run the app locally using Docker, we will use **Docker Compose** to set up both the backend and frontend services.

1. **Build the containers**
   From the root directory of the project (where the `docker-compose.yml` file is located), run the following command to build the Docker containers for both backend and frontend:

       
       docker-compose build

### 4. Start the Containers

After successfully building the Docker containers, you can start them with the following steps:

1. **Start the containers in the foreground**:

   To start both the frontend and backend containers and see their logs in the terminal, run:
      ```text
      docker-compose up

### 4. Access the Application

Once the Docker containers are up and running, you can access the application in your web browser:

- **Frontend**: The frontend React app will be available at the following URL:

  ```text
  http://localhost:3000


### 5. Backend Access

The backend of the application is built with **FastAPI** and can be accessed through the following steps:

- **Backend API URL**:
   Once the Docker containers are running, the backend FastAPI application will be available at:

   ```text
   http://localhost:8000

### 6. Backend Access


This document describes the database schema used in the "Chat with PDF" API, which consists of two main tables: `pdf_sessions` and `chat_messages`. The schema is created using SQLAlchemy ORM, which allows interaction with the database in Python.

## 1. **PDFSession Table**

The `pdf_sessions` table stores information about uploaded PDF files, including the session ID, PDF name, extracted text, and summary.

### Fields:

- **session_id** (`String`): The unique identifier for the PDF session. This is the primary key.
- **pdf_name** (`String`): The name of the uploaded PDF file.
- **text** (`Text`): The extracted text from the uploaded PDF file.
- **summary** (`Text`): A summary of the PDF content generated using Hugging Face's summarization model.

### Relationships:
- **messages** (`relationship`): A one-to-many relationship with the `ChatMessage` table, where each session can have multiple chat messages. The `cascade="all, delete-orphan"` ensures that if a `PDFSession` is deleted, all related `ChatMessage` records are also deleted.

## 2. **ChatMessage Table**

The `chat_messages` table stores chat messages from users and the bot's responses, associated with a specific PDF session.

### Fields:

- **id** (`String`): The unique identifier for the chat message. This is the primary key.
- **session_id** (`String`): A foreign key linking the message to a specific session in the `pdf_sessions` table.
- **user_message** (`Text`): The message sent by the user in the chat.
- **bot_response** (`Text`): The response generated by the bot based on the user's message and the extracted text from the PDF.
- **timestamp** (`DateTime`): The timestamp when the chat message was created. Defaults to the current UTC time (`datetime.utcnow()`).

### Relationships:
- **session** (`relationship`): A many-to-one relationship with the `PDFSession` table, where each message is associated with a specific PDF session.

